<div>
  <form [formGroup]="form">
    <div *ngFor="let question of questions; let i = index" class="form-row">
      <app-question [question]="question" [form]="form"></app-question>
      <div [appIndent]=question.indentThisQuestion>
        <div *ngIf="question.disableAddButtonIfCurrentValueIsBlank">
          <button (click)="addAnotherQuestion(question, questions, i)" *ngIf="question.giveOptionToAnswerThisQuestionMultipleTimes" id="add-new-item-button"  class="btn waves-effect waves-light" type="button" color="accent" [disabled]="!form.getRawValue()[question.key]">Add Another {{question.label}}
            <i class="material-icons right">add</i>
          </button>
        </div>
        <div *ngIf="!question.disableAddButtonIfCurrentValueIsBlank">
          <button (click)="addAnotherQuestion(question, questions, i)" *ngIf="question.giveOptionToAnswerThisQuestionMultipleTimes" id="add-new-item-button"  class="btn waves-effect waves-light" type="button" color="accent">Add Another {{question.label}}
            <i class="material-icons right">add</i>
          </button>
        </div>
      </div>
      <br>
      <button (click)="addAnotherQuestionGroup(question, questions, i)" *ngIf="question.isThisQuestionTheLastOfAQuestionGroup" id="add-new-question-group-button"  class="btn waves-effect waves-light" type="button">Add Another {{question.findParentQuestion(question, questions, i).label}}
        <i class="material-icons right">add</i>
      </button>
    </div>
    <div class="form-row">
      <button (click)="processForm(questions)" id="new-collection-submit" [disabled]="!form.valid"  class="btn waves-effect waves-light">Submit
        <i class="material-icons right">send</i>
      </button>
    </div>
  </form>
</div>
<div>
  <p>Payload: {{payLoad}}</p>
</div>
